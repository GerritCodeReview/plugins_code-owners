{
  "comments": [
    {
      "key": {
        "uuid": "69e2e9c3_830a6f34",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 18,
      "author": {
        "id": 1113292
      },
      "writtenOn": "2020-09-18T15:31:13Z",
      "side": 1,
      "message": "IMHO, I prefer the change owner over the uploader. When a change is submitted, the commit will use the change owner as the author, rather than the uploader of the final patchset. Therefore calculating ownership from the change owner feels more natural. Like uploader, change owner is also difficult to forgeï¼ˆthe uploader of the initial patchset of a change). For the potential exploit you mentioned, as long as the add patch set permission is blocked[1], this won\u0027t be a concern. \n\nConsider the following case: some external contributor created a change for wrong branch. After some significant amount of time on waiting for the change owner to act, one of the maintainer who is the fallback owner of the entire codebase decided to rebase the change to the correct one on the Web UI, and the owner approval is granted implicitly.\n\nAlso consider the case where a file is owned by a single user, and that user submits a change to modify the file. Later, a bot comes in to update the commit message (say link the commit to some external services), and the implicit owner approval is lost until the user to self approve the change for owner approval or push another patchset.\n\n[1] https://gerrit-review.googlesource.com/Documentation/access-control.html#category_add_patch_set",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 22
      },
      "revId": "6704234ff4ce41f1c7ed8dda7545f98e0eece588",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b474849_23673228",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 18,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2020-09-21T06:53:26Z",
      "side": 1,
      "message": "\u003e For the potential exploit you mentioned, as long as the add patch set permission is\n\u003e blocked[1], this won\u0027t be a concern. \nIt has to be secure with any permission configuration, we cannot assume that the add patch set permission is blocked.\n\n\u003e Consider the following case: some external contributor created a change for wrong branch.\nThis seems to be a rather rare case.\n\n\u003e After some significant amount of time on waiting for the change owner to act, one of the \n\u003e maintainer who is the fallback owner of the entire codebase decided to rebase the change to\n\u003e the correct one on the Web UI, and the owner approval is granted implicitly.\n\nThis is a good point. The maintainer needs to be aware of this. Maybe we should rather have no implicit approvals at all? I might add a configuration option to turn implicit approvals off.\n\n\u003e Also consider the case where a file is owned by a single user, and that user submits a change\n\u003e to modify the file. Later, a bot comes in to update the commit message (say link the commit to \n\u003e some external services), and the implicit owner approval is lost until the user to self approve \n\u003e the change for owner approval or push another patchset.\n\nYes, in this case the change owner would need to self-approve, which doesn\u0027t seem to be a big deal.",
      "parentUuid": "69e2e9c3_830a6f34",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 22
      },
      "revId": "6704234ff4ce41f1c7ed8dda7545f98e0eece588",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c996a36_b4f98bfa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 18,
      "author": {
        "id": 1113292
      },
      "writtenOn": "2020-09-28T14:55:36Z",
      "side": 1,
      "message": "Is there a way to continue this conversation in a mail list or move to a bug tracker?\n\n\u003e It has to be secure with any permission configuration, we cannot assume that the add patch set permission is blocked.\n\nTrue. I really don\u0027t like the fact that the add patch set permission is default to Registered Users, which creates all these problems at first place.\n\nAssuming that permission is default, do you think using change owner a better choice over patchset uploader?",
      "parentUuid": "3b474849_23673228",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 22
      },
      "revId": "6704234ff4ce41f1c7ed8dda7545f98e0eece588",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "231f9e04_01b29e7f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 18,
      "author": {
        "id": 1113292
      },
      "writtenOn": "2020-09-28T15:55:06Z",
      "side": 1,
      "message": "I just filed https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d13453 for gerrit backend and https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d13454 for code-owners plugin. We can continue the conversation there.",
      "parentUuid": "2c996a36_b4f98bfa",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 22
      },
      "revId": "6704234ff4ce41f1c7ed8dda7545f98e0eece588",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae8ebfa0_4246be01",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1113292
      },
      "writtenOn": "2020-09-18T15:31:13Z",
      "side": 1,
      "message": "Is there a design doc or tracking issue for this?",
      "revId": "6704234ff4ce41f1c7ed8dda7545f98e0eece588",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36844f57_408517e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2020-09-21T06:53:26Z",
      "side": 1,
      "message": "Yes, we have a design doc for the code owner functionality, but it\u0027s internal to Google (if you are a Googler please send me an internal email and I can share it with you).",
      "parentUuid": "ae8ebfa0_4246be01",
      "revId": "6704234ff4ce41f1c7ed8dda7545f98e0eece588",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}